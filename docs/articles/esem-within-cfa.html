<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ESEM-within-CFA • esemComp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ESEM-within-CFA">
<meta property="og:description" content="esemComp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">esemComp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/esem-within-cfa.html">ESEM-within-CFA</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ESEM-within-CFA</h1>
            
      
      
      <div class="hidden name"><code>esem-within-cfa.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">esemComp</span><span class="op">)</span></code></pre></div>
<p>Exploratory Structural Equation Modeling (ESEM) brings together the strengths in Exploratory Factor Analysis (EFA) and Structural Equation Modeling (SEM) <span class="citation">(<a href="#ref-asparouhov_exploratory_2009" role="doc-biblioref">Asparouhov and Muthén 2009</a>)</span>. In its simplest form, it involves using EFA “blocks” as part of a SEM model. These blocks often use either Geomin rotation or target rotations.</p>
<p>Currently, the integration of EFA blocks to make ESEM models is still under development by the team that develops <code>lavaan</code>, a prominent package for CFA and ESEM in R.</p>
<p>Here, we will overcome this difficulty using the ESEM-within-CFA approach, where we first do the EFA part and then use its results as starting values in a CFA model (or a SEM model; see <span class="citation"><a href="#ref-marsh_exploratory_2014" role="doc-biblioref">Marsh et al.</a> (<a href="#ref-marsh_exploratory_2014" role="doc-biblioref">2014</a>)</span> for a nice introduction to the topic).</p>
<p>We will use the Holzinger and Swineford (1939) dataset, available in the <code>lavaan</code> package. It shows the results of 301 children in tests of the following cognitive abilities: visual (items x1-x3), textual (x4-x6) and speed (x7-x9). Let’s load the dataset and keep only the item-columns.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#load full data</span>
<span class="va">hw_data</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/lavaan/man/HolzingerSwineford1939.html" class="external-link">HolzingerSwineford1939</a></span>
<span class="co"># keep all rows and only the item-columns</span>
<span class="va">hw_data</span> <span class="op">&lt;-</span> <span class="va">hw_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span><span class="op">]</span>

<span class="co">#take a look</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hw_data</span><span class="op">)</span>
<span class="co">#&gt;         x1   x2    x3       x4   x5        x6       x7   x8       x9</span>
<span class="co">#&gt; 1 3.333333 7.75 0.375 2.333333 5.75 1.2857143 3.391304 5.75 6.361111</span>
<span class="co">#&gt; 2 5.333333 5.25 2.125 1.666667 3.00 1.2857143 3.782609 6.25 7.916667</span>
<span class="co">#&gt; 3 4.500000 5.25 1.875 1.000000 1.75 0.4285714 3.260870 3.90 4.416667</span>
<span class="co">#&gt; 4 5.333333 7.75 3.000 2.666667 4.50 2.4285714 3.000000 5.30 4.861111</span>
<span class="co">#&gt; 5 4.833333 4.75 0.875 2.666667 4.00 2.5714286 3.695652 6.30 5.916667</span>
<span class="co">#&gt; 6 5.333333 5.00 2.250 1.000000 3.00 0.8571429 4.347826 6.65 7.500000</span></code></pre></div>
<div class="section level2">
<h2 id="efa-blocks">EFA blocks<a class="anchor" aria-label="anchor" href="#efa-blocks"></a>
</h2>
<p>To make an EFA with target rotation, first we need to specify the target rotation matrix. The <code><a href="../reference/make_target.html">make_target()</a></code> function facilitates this. For this function to work, we need to indicate the mapping between factors and their main loadings, that is, which items we expect to load heavily in each factor. This information must be contained in a list where the name of each item is the factor name, and the content is a numeric vector with the column number of the items we expect to load onto that factor.</p>
<p>If we check back the dataset and the factors, we see that the correspondence between factor and item column number is pretty straightforward in this dataset. The first three columns refer to the items in the first factor, the next three columns are the items for the second factor etc. This may not be the case for your dataset! Many scales have items related to different factors interleaved, leading to non-sequential items referring to the same factor. It is also important to remember that the item number for the rotation matrix always refers to the column position of the item in a data.frame comprised <em>only</em> of the item data (recall that we started this vignette making a separate dataset only with the item data). Its lowest number will always be one and the highest number will be the total number of items.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># list with mapping between factors and items</span>
<span class="va">main_loadings_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>visual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,
                           textual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,
                           speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span>
<span class="va">target_rot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_target.html">make_target</a></span><span class="op">(</span>nitems <span class="op">=</span> <span class="fl">9</span>, mainloadings <span class="op">=</span> <span class="va">main_loadings_list</span><span class="op">)</span>
<span class="va">target_rot</span>
<span class="co">#&gt;       visual textual speed</span>
<span class="co">#&gt;  [1,]     NA       0     0</span>
<span class="co">#&gt;  [2,]     NA       0     0</span>
<span class="co">#&gt;  [3,]     NA       0     0</span>
<span class="co">#&gt;  [4,]      0      NA     0</span>
<span class="co">#&gt;  [5,]      0      NA     0</span>
<span class="co">#&gt;  [6,]      0      NA     0</span>
<span class="co">#&gt;  [7,]      0       0    NA</span>
<span class="co">#&gt;  [8,]      0       0    NA</span>
<span class="co">#&gt;  [9,]      0       0    NA</span></code></pre></div>
<p><code>NA</code> in the target rotation matrix indicate loadings that shall not be brought closer to zero in the rotation procedure, and zeros indicate otherwise.</p>
<p>One can also easily make a target roation for a bifactor model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bifactor_target_rot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_target.html">make_target</a></span><span class="op">(</span>nitems <span class="op">=</span> <span class="fl">9</span>,
                                  mainloadings <span class="op">=</span> <span class="va">main_loadings_list</span>,
                                  bifactor <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">bifactor_target_rot</span>
<span class="co">#&gt;       visual textual speed  G</span>
<span class="co">#&gt;  [1,]     NA       0     0 NA</span>
<span class="co">#&gt;  [2,]     NA       0     0 NA</span>
<span class="co">#&gt;  [3,]     NA       0     0 NA</span>
<span class="co">#&gt;  [4,]      0      NA     0 NA</span>
<span class="co">#&gt;  [5,]      0      NA     0 NA</span>
<span class="co">#&gt;  [6,]      0      NA     0 NA</span>
<span class="co">#&gt;  [7,]      0       0    NA NA</span>
<span class="co">#&gt;  [8,]      0       0    NA NA</span>
<span class="co">#&gt;  [9,]      0       0    NA NA</span></code></pre></div>
<p>However, we will keep the non-bifactor model in this vignette.</p>
<p>Now, for the loading extraction itself with the <code><a href="../reference/esem_efa.html">esem_efa()</a></code> function. We need to supply the data, the number of factors to be extracted and the target rotation matrix.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Specify the efa block.</span>
<span class="co"># Note that if we continued with the bifactor model 'nfactors' would then be specified as 4 and not 3 due to the G factor being added</span>

<span class="va">efa_block</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/esem_efa.html">esem_efa</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hw_data</span>,
                      nfactors <span class="op">=</span> <span class="fl">3</span>,
                      target <span class="op">=</span> <span class="va">target_rot</span><span class="op">)</span>
<span class="co">#&gt; Loading required namespace: GPArotation</span>
<span class="va">efa_block</span>
<span class="co">#&gt; Factor Analysis using method =  pa</span>
<span class="co">#&gt; Call: psych::fa(r = data, nfactors = nfactors, rotate = targetAlgorithm, </span>
<span class="co">#&gt;     fm = fm, Target = target)</span>
<span class="co">#&gt; Standardized loadings (pattern matrix) based upon correlation matrix</span>
<span class="co">#&gt;      PA2   PA3   PA1   h2   u2 com</span>
<span class="co">#&gt; x1  0.18  0.08  0.58 0.48 0.52 1.2</span>
<span class="co">#&gt; x2  0.03 -0.09  0.52 0.26 0.74 1.1</span>
<span class="co">#&gt; x3 -0.08  0.08  0.67 0.45 0.55 1.1</span>
<span class="co">#&gt; x4  0.85  0.01  0.02 0.73 0.27 1.0</span>
<span class="co">#&gt; x5  0.89  0.00 -0.06 0.75 0.25 1.0</span>
<span class="co">#&gt; x6  0.80 -0.01  0.08 0.69 0.31 1.0</span>
<span class="co">#&gt; x7  0.04  0.75 -0.24 0.51 0.49 1.2</span>
<span class="co">#&gt; x8 -0.05  0.72  0.03 0.52 0.48 1.0</span>
<span class="co">#&gt; x9  0.01  0.50  0.32 0.46 0.54 1.7</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                        PA2  PA3  PA1</span>
<span class="co">#&gt; SS loadings           2.22 1.38 1.26</span>
<span class="co">#&gt; Proportion Var        0.25 0.15 0.14</span>
<span class="co">#&gt; Cumulative Var        0.25 0.40 0.54</span>
<span class="co">#&gt; Proportion Explained  0.46 0.28 0.26</span>
<span class="co">#&gt; Cumulative Proportion 0.46 0.74 1.00</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  With factor correlations of </span>
<span class="co">#&gt;      PA2  PA3  PA1</span>
<span class="co">#&gt; PA2 1.00 0.26 0.34</span>
<span class="co">#&gt; PA3 0.26 1.00 0.31</span>
<span class="co">#&gt; PA1 0.34 0.31 1.00</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Mean item complexity =  1.1</span>
<span class="co">#&gt; Test of the hypothesis that 3 factors are sufficient.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The degrees of freedom for the null model are  36  and the objective function was  3.05 with Chi Square of  904.1</span>
<span class="co">#&gt; The degrees of freedom for the model are 12  and the objective function was  0.08 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The root mean square of the residuals (RMSR) is  0.02 </span>
<span class="co">#&gt; The df corrected root mean square of the residuals is  0.03 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The harmonic number of observations is  301 with the empirical chi square  7.87  with prob &lt;  0.8 </span>
<span class="co">#&gt; The total number of observations was  301  with Likelihood Chi Square =  22.54  with prob &lt;  0.032 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Tucker Lewis Index of factoring reliability =  0.963</span>
<span class="co">#&gt; RMSEA index =  0.054  and the 90 % confidence intervals are  0.016 0.088</span>
<span class="co">#&gt; BIC =  -45.95</span>
<span class="co">#&gt; Fit based upon off diagonal values = 1</span>
<span class="co">#&gt; Measures of factor score adequacy             </span>
<span class="co">#&gt;                                                    PA2  PA3  PA1</span>
<span class="co">#&gt; Correlation of (regression) scores with factors   0.94 0.86 0.84</span>
<span class="co">#&gt; Multiple R square of scores with factors          0.89 0.74 0.70</span>
<span class="co">#&gt; Minimum correlation of possible factor scores     0.78 0.48 0.40</span></code></pre></div>
<p>The <code><a href="../reference/esem_efa.html">esem_efa()</a></code> function is actually a wrapper around the <code>psych</code> package function <code>fa()</code> for exploratory factor analysis. All its controls can be supplied for finer specification of the factor extraction procedure. Just be sure to always input the arguments from the original function with <code>name = value</code> pairs. Be sure to check <code>fa()</code>’s documentation for information on those controls and information about all the fields inside the output object.</p>
<p>By default, the target rotation used is an oblique one. The user can switch to an orthogonal target rotation by setting the <code>targetAlgorithm</code> parameter to <code>TargetT</code>. Other alternative is to drop the use of target rotation altogether and use a Geomin rotation instead. In this case, just leave the <code>target</code> parameter alone. One last possible use is available for the case of bifactor models. In this case, just set <code>bifactor = TRUE</code>. Currently, bifactor models are only available with target rotation. The code for each of these cases are commented below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># orthogonal target rotation</span>
<span class="co"># esem_efa(data = hw_data,</span>
<span class="co">#          nfactors = 3,</span>
<span class="co">#          target = target_rot,</span>
<span class="co">#          targetAlgorithm = "TargetT")</span>

<span class="co"># geomin rotation</span>
<span class="co"># esem_efa(data = hw_data,</span>
<span class="co">#          nfactors = 3)</span>

<span class="co"># bifactor model</span>
<span class="co"># esem_efa(data = hw_data,</span>
<span class="co">#          nfactors = 4,</span>
<span class="co">#          target = bifactor_target_rot,</span>
<span class="co">#          bifactor = TRUE)</span></code></pre></div>
<p>Being able to do these factor analyses as in ESEM blocks is nice, but it still lacks the great flexibility and extensibility present in CFA/SEM models. To access those features, we will use the ESEM-within-CFA approach next.</p>
</div>
<div class="section level2">
<h2 id="esem-within-cfa">ESEM-within-CFA<a class="anchor" aria-label="anchor" href="#esem-within-cfa"></a>
</h2>
<p>While in possession of an EFA done in the ESEM approach, we need just to use the <code><a href="../reference/syntax_composer.html">syntax_composer()</a></code> function to “compose” the ESEM-within-CFA model in lavaan’s syntax. Then, with the syntax, we run the lavaan fit.</p>
<p><code><a href="../reference/syntax_composer.html">syntax_composer()</a></code> takes as first argument a EFA solution, and as second argument a named list indicating the referents for each factor. Each entry in the list should have the form <code>factor = "item_name"</code>. Importantly, this list must be in the same order the factors appear in the factor loadings matrix in the EFA solution. Usually, this will not be the same order you used in the list to create a target rotation, because in the EFA matrix the factors are ordered by the amount of variance explained, not by any order we supply.</p>
<p>For instance, by checking the loadings we can infer that the order in the factor loadings matrix in our example is “textual, speed, visual.” That is not the order we used in <code><a href="../reference/make_target.html">make_target()</a></code>(“visual, textual, speed”).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">efa_block</span><span class="op">$</span><span class="va">loadings</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Loadings:</span>
<span class="co">#&gt;    PA2    PA3    PA1   </span>
<span class="co">#&gt; x1  0.179         0.577</span>
<span class="co">#&gt; x2                0.515</span>
<span class="co">#&gt; x3                0.670</span>
<span class="co">#&gt; x4  0.845              </span>
<span class="co">#&gt; x5  0.886              </span>
<span class="co">#&gt; x6  0.803              </span>
<span class="co">#&gt; x7         0.745 -0.240</span>
<span class="co">#&gt; x8         0.724       </span>
<span class="co">#&gt; x9         0.504  0.317</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                  PA2   PA3   PA1</span>
<span class="co">#&gt; SS loadings    2.189 1.354 1.218</span>
<span class="co">#&gt; Proportion Var 0.243 0.150 0.135</span>
<span class="co">#&gt; Cumulative Var 0.243 0.394 0.529</span></code></pre></div>
<p>When checking the loadings matrix we can also pick which is the best referent for each factor. It should always be an item that loads heavily on one factor and poorly on the others. So, for factor “textual” the referent will be x5, for speed it will be x8 and for visual x3. We will create the list with them in this order.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create named character vector of referents</span>
<span class="va">hw_referents</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>textual <span class="op">=</span> <span class="st">"x5"</span>,
                     speed <span class="op">=</span> <span class="st">"x8"</span>,
                     visual <span class="op">=</span> <span class="st">"x3"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, it is possible to use the <code><a href="../reference/find_referents.html">find_referents()</a></code> function for automated selection of referents. The inputs are the result from the <code><a href="../reference/esem_efa.html">esem_efa()</a></code>function and a character vector with the desired names for the factors. Once again, the names must refer to the factors in the order they appear in the exploratory solution.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/find_referents.html">find_referents</a></span><span class="op">(</span><span class="va">efa_block</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"textual"</span>, <span class="st">"speed"</span>, <span class="st">"visual"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; $textual</span>
<span class="co">#&gt; [1] "x5"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $speed</span>
<span class="co">#&gt; [1] "x7"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $visual</span>
<span class="co">#&gt; [1] "x3"</span></code></pre></div>
<p>It should be noted that the referents chosen by the function are not exactly the same as the ones we chose by inspecting the factor loadings, the referent for speed differs. This happens because the current implementation of <code><a href="../reference/find_referents.html">find_referents()</a></code> searches only for the highest loading item on each factor, with no regard for how well the item loads on other factors.</p>
<p>Finally, we compose the lavaan syntax with <code>syntax_composer</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># compose lavaan syntax</span>
<span class="va">model_syntax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/syntax_composer.html">syntax_composer</a></span><span class="op">(</span>efa_object <span class="op">=</span> <span class="va">efa_block</span>,
                                referents <span class="op">=</span> <span class="va">hw_referents</span><span class="op">)</span>

<span class="co"># altenatively, if you plan fit the model with free factor variance parameters</span>
<span class="co">#model_syntax_free_var &lt;- syntax_composer(efa_object = efa_block,</span>
<span class="co">#                                referents = hw_referents,</span>
<span class="co">#                                only_fix_crossloadings = FALSE)</span></code></pre></div>
<p>Laavan’s model syntaxes are nothing more than an (often) long string. The best way to see the resulting syntax is with <code><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">model_syntax</span><span class="op">)</span>
<span class="co">#&gt; textual =~ start(0.179)*x1+</span>
<span class="co">#&gt; start(0.03)*x2+</span>
<span class="co">#&gt; -0.082*x3+</span>
<span class="co">#&gt; start(0.845)*x4+</span>
<span class="co">#&gt; start(0.886)*x5+</span>
<span class="co">#&gt; start(0.803)*x6+</span>
<span class="co">#&gt; start(0.037)*x7+</span>
<span class="co">#&gt; -0.049*x8+</span>
<span class="co">#&gt; start(0.014)*x9 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; speed =~ start(0.081)*x1+</span>
<span class="co">#&gt; start(-0.085)*x2+</span>
<span class="co">#&gt; 0.075*x3+</span>
<span class="co">#&gt; start(0.01)*x4+</span>
<span class="co">#&gt; 0.003*x5+</span>
<span class="co">#&gt; start(-0.006)*x6+</span>
<span class="co">#&gt; start(0.745)*x7+</span>
<span class="co">#&gt; start(0.724)*x8+</span>
<span class="co">#&gt; start(0.504)*x9 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; visual =~ start(0.577)*x1+</span>
<span class="co">#&gt; start(0.515)*x2+</span>
<span class="co">#&gt; start(0.67)*x3+</span>
<span class="co">#&gt; start(0.016)*x4+</span>
<span class="co">#&gt; -0.064*x5+</span>
<span class="co">#&gt; start(0.08)*x6+</span>
<span class="co">#&gt; start(-0.24)*x7+</span>
<span class="co">#&gt; 0.035*x8+</span>
<span class="co">#&gt; start(0.317)*x9</span></code></pre></div>
<p>We can confirm that the each factor has two fixed parameters (the cross-loadings from the other factors) and all other parameters have the loadings from the EFA as starting points. We are ready to run a CFA in lavaan with this syntax. Alternatively, you can simply copy the syntax and run the model in a lavaan-powered point-and-click software like <a href="https://jasp-stats.org/" class="external-link">JASP</a> or <a href="https://www.jamovi.org/" class="external-link">JAMOVI</a> (with the SEM module). Just be sure to check you are using the parametrization that corresponds to the syntax you composed.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cfa_fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_syntax</span>, data <span class="op">=</span> <span class="va">hw_data</span>, std.lv <span class="op">=</span><span class="cn">T</span><span class="op">)</span>
<span class="fu">lavaan</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="va">cfa_fit</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span>, std <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; lavaan 0.6-8 ended normally after 28 iterations</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Estimator                                         ML</span>
<span class="co">#&gt;   Optimization method                           NLMINB</span>
<span class="co">#&gt;   Number of model parameters                        33</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Number of observations                           301</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt; Model Test User Model:</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Test statistic                                22.897</span>
<span class="co">#&gt;   Degrees of freedom                                12</span>
<span class="co">#&gt;   P-value (Chi-square)                           0.029</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model Test Baseline Model:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Test statistic                               918.852</span>
<span class="co">#&gt;   Degrees of freedom                                36</span>
<span class="co">#&gt;   P-value                                        0.000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; User Model versus Baseline Model:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Comparative Fit Index (CFI)                    0.988</span>
<span class="co">#&gt;   Tucker-Lewis Index (TLI)                       0.963</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Loglikelihood and Information Criteria:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Loglikelihood user model (H0)              -3706.541</span>
<span class="co">#&gt;   Loglikelihood unrestricted model (H1)      -3695.092</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Akaike (AIC)                                7479.081</span>
<span class="co">#&gt;   Bayesian (BIC)                              7601.416</span>
<span class="co">#&gt;   Sample-size adjusted Bayesian (BIC)         7496.758</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root Mean Square Error of Approximation:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   RMSEA                                          0.055</span>
<span class="co">#&gt;   90 Percent confidence interval - lower         0.017</span>
<span class="co">#&gt;   90 Percent confidence interval - upper         0.089</span>
<span class="co">#&gt;   P-value RMSEA &lt;= 0.05                          0.365</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Standardized Root Mean Square Residual:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   SRMR                                           0.017</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Parameter Estimates:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Standard errors                             Standard</span>
<span class="co">#&gt;   Information                                 Expected</span>
<span class="co">#&gt;   Information saturated (h1) model          Structured</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Latent Variables:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;   textual =~                                                            </span>
<span class="co">#&gt;     x1                0.218    0.080    2.728    0.006    0.218    0.187</span>
<span class="co">#&gt;     x2                0.052    0.084    0.611    0.541    0.052    0.044</span>
<span class="co">#&gt;     x3               -0.082                              -0.082   -0.073</span>
<span class="co">#&gt;     x4                0.971    0.062   15.657    0.000    0.971    0.836</span>
<span class="co">#&gt;     x5                1.138    0.063   18.018    0.000    1.138    0.883</span>
<span class="co">#&gt;     x6                0.878    0.058   15.034    0.000    0.878    0.803</span>
<span class="co">#&gt;     x7                0.030    0.078    0.391    0.696    0.030    0.028</span>
<span class="co">#&gt;     x8               -0.049                              -0.049   -0.048</span>
<span class="co">#&gt;     x9                0.023    0.064    0.359    0.720    0.023    0.023</span>
<span class="co">#&gt;   speed =~                                                              </span>
<span class="co">#&gt;     x1                0.080    0.087    0.917    0.359    0.080    0.069</span>
<span class="co">#&gt;     x2               -0.105    0.093   -1.128    0.259   -0.105   -0.089</span>
<span class="co">#&gt;     x3                0.075                               0.075    0.066</span>
<span class="co">#&gt;     x4                0.006    0.062    0.104    0.917    0.006    0.006</span>
<span class="co">#&gt;     x5                0.003                               0.003    0.002</span>
<span class="co">#&gt;     x6               -0.008    0.060   -0.139    0.889   -0.008   -0.008</span>
<span class="co">#&gt;     x7                0.800    0.098    8.140    0.000    0.800    0.736</span>
<span class="co">#&gt;     x8                0.737    0.069   10.647    0.000    0.737    0.729</span>
<span class="co">#&gt;     x9                0.503    0.068    7.394    0.000    0.503    0.500</span>
<span class="co">#&gt;   visual =~                                                             </span>
<span class="co">#&gt;     x1                0.689    0.088    7.834    0.000    0.689    0.591</span>
<span class="co">#&gt;     x2                0.597    0.093    6.413    0.000    0.597    0.508</span>
<span class="co">#&gt;     x3                0.759    0.077    9.829    0.000    0.759    0.672</span>
<span class="co">#&gt;     x4                0.043    0.067    0.646    0.518    0.043    0.037</span>
<span class="co">#&gt;     x5               -0.064                              -0.064   -0.050</span>
<span class="co">#&gt;     x6                0.101    0.063    1.605    0.109    0.101    0.093</span>
<span class="co">#&gt;     x7               -0.236    0.100   -2.355    0.019   -0.236   -0.217</span>
<span class="co">#&gt;     x8                0.035                               0.035    0.035</span>
<span class="co">#&gt;     x9                0.318    0.072    4.384    0.000    0.318    0.315</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Covariances:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;   textual ~~                                                            </span>
<span class="co">#&gt;     speed             0.258    0.087    2.977    0.003    0.258    0.258</span>
<span class="co">#&gt;     visual            0.303    0.092    3.307    0.001    0.303    0.303</span>
<span class="co">#&gt;   speed ~~                                                              </span>
<span class="co">#&gt;     visual            0.307    0.115    2.670    0.008    0.307    0.307</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Variances:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;    .x1                0.696    0.087    8.038    0.000    0.696    0.513</span>
<span class="co">#&gt;    .x2                1.035    0.102   10.151    0.000    1.035    0.749</span>
<span class="co">#&gt;    .x3                0.692    0.097    7.134    0.000    0.692    0.543</span>
<span class="co">#&gt;    .x4                0.377    0.048    7.902    0.000    0.377    0.279</span>
<span class="co">#&gt;    .x5                0.403    0.061    6.590    0.000    0.403    0.243</span>
<span class="co">#&gt;    .x6                0.365    0.042    8.613    0.000    0.365    0.305</span>
<span class="co">#&gt;    .x7                0.594    0.106    5.624    0.000    0.594    0.502</span>
<span class="co">#&gt;    .x8                0.479    0.080    5.958    0.000    0.479    0.469</span>
<span class="co">#&gt;    .x9                0.551    0.060    9.132    0.000    0.551    0.543</span>
<span class="co">#&gt;     textual           1.000                               1.000    1.000</span>
<span class="co">#&gt;     speed             1.000                               1.000    1.000</span>
<span class="co">#&gt;     visual            1.000                               1.000    1.000</span></code></pre></div>
<p>If you need to fit a model with free factor (residual) variances you’ll need to use the function <code><a href="../reference/fit_free_factor_var_esem.html">fit_free_factor_var_esem()</a></code>. This function is a wrapper around the <code>lavaan()</code> function with the same parameters set in the <code>cfa()</code> function, except that the factor variances are free to be estimated and the first indicators in each factor are not automatically fixed. We assume the identification is granted by the fixed referents in the model syntax, which should be the case if you set <code>only_fix_crossloadings = FALSE</code> when composing the syntax with <code>syntax_composer</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># cfa_fit &lt;- fit_free_factor_var_esem(model_syntax_free_var, hw_data)</span>
<span class="co"># lavaan::summary(cfa_fit, fit.measures = TRUE, std = TRUE)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mcdonalds-omega">McDonald’s Omega<a class="anchor" aria-label="anchor" href="#mcdonalds-omega"></a>
</h2>
<p>We can calculate McDonald’s omegas using the fitted model and target rotation matrix. Currently, the use of a target rotation matrix is mandatory.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/omega_esem.html">omega_esem</a></span><span class="op">(</span><span class="va">cfa_fit</span>, <span class="va">target_rot</span><span class="op">)</span>
<span class="co">#&gt;  visual textual   speed </span>
<span class="co">#&gt;   0.635   0.885   0.718</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extending-the-model">Extending the model<a class="anchor" aria-label="anchor" href="#extending-the-model"></a>
</h2>
<p>To modify or extend the model we just need to add more information to the model syntax we already have. Let’s say we want to estimate the residual covariance between two items, we could do:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># lavaan syntax for "x3 covariates with x4"</span>
<span class="va">mod_extension</span> <span class="op">&lt;-</span> <span class="st">"x3 ~~ x4"</span>
<span class="va">extended_model_syntax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">model_syntax</span>, <span class="va">mod_extension</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">extended_model_syntax</span><span class="op">)</span>
<span class="co">#&gt; textual =~ start(0.179)*x1+</span>
<span class="co">#&gt; start(0.03)*x2+</span>
<span class="co">#&gt; -0.082*x3+</span>
<span class="co">#&gt; start(0.845)*x4+</span>
<span class="co">#&gt; start(0.886)*x5+</span>
<span class="co">#&gt; start(0.803)*x6+</span>
<span class="co">#&gt; start(0.037)*x7+</span>
<span class="co">#&gt; -0.049*x8+</span>
<span class="co">#&gt; start(0.014)*x9 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; speed =~ start(0.081)*x1+</span>
<span class="co">#&gt; start(-0.085)*x2+</span>
<span class="co">#&gt; 0.075*x3+</span>
<span class="co">#&gt; start(0.01)*x4+</span>
<span class="co">#&gt; 0.003*x5+</span>
<span class="co">#&gt; start(-0.006)*x6+</span>
<span class="co">#&gt; start(0.745)*x7+</span>
<span class="co">#&gt; start(0.724)*x8+</span>
<span class="co">#&gt; start(0.504)*x9 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; visual =~ start(0.577)*x1+</span>
<span class="co">#&gt; start(0.515)*x2+</span>
<span class="co">#&gt; start(0.67)*x3+</span>
<span class="co">#&gt; start(0.016)*x4+</span>
<span class="co">#&gt; -0.064*x5+</span>
<span class="co">#&gt; start(0.08)*x6+</span>
<span class="co">#&gt; start(-0.24)*x7+</span>
<span class="co">#&gt; 0.035*x8+</span>
<span class="co">#&gt; start(0.317)*x9 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x3 ~~ x4</span></code></pre></div>
<p>The formula <code>paste(model_syntax, mod_extension, sep = "\n")</code> can be used iteratively to progressively add extensions to the model, or one can write several extensions between quotes and add them to the model in one go.</p>
<p>After extending the model, the new syntax can be used to fit a new model with lavaan’s <code>cfa()</code> or <code>sem()</code> (if your extensions include regressions).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">extended_cfa_fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">extended_model_syntax</span>, <span class="va">hw_data</span>, std.lv <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="fu">lavaan</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="va">extended_cfa_fit</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span>, std <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; lavaan 0.6-8 ended normally after 28 iterations</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Estimator                                         ML</span>
<span class="co">#&gt;   Optimization method                           NLMINB</span>
<span class="co">#&gt;   Number of model parameters                        34</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Number of observations                           301</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt; Model Test User Model:</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Test statistic                                22.535</span>
<span class="co">#&gt;   Degrees of freedom                                11</span>
<span class="co">#&gt;   P-value (Chi-square)                           0.021</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model Test Baseline Model:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Test statistic                               918.852</span>
<span class="co">#&gt;   Degrees of freedom                                36</span>
<span class="co">#&gt;   P-value                                        0.000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; User Model versus Baseline Model:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Comparative Fit Index (CFI)                    0.987</span>
<span class="co">#&gt;   Tucker-Lewis Index (TLI)                       0.957</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Loglikelihood and Information Criteria:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Loglikelihood user model (H0)              -3706.360</span>
<span class="co">#&gt;   Loglikelihood unrestricted model (H1)      -3695.092</span>
<span class="co">#&gt;                                                       </span>
<span class="co">#&gt;   Akaike (AIC)                                7480.719</span>
<span class="co">#&gt;   Bayesian (BIC)                              7606.761</span>
<span class="co">#&gt;   Sample-size adjusted Bayesian (BIC)         7498.933</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root Mean Square Error of Approximation:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   RMSEA                                          0.059</span>
<span class="co">#&gt;   90 Percent confidence interval - lower         0.022</span>
<span class="co">#&gt;   90 Percent confidence interval - upper         0.094</span>
<span class="co">#&gt;   P-value RMSEA &lt;= 0.05                          0.297</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Standardized Root Mean Square Residual:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   SRMR                                           0.017</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Parameter Estimates:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Standard errors                             Standard</span>
<span class="co">#&gt;   Information                                 Expected</span>
<span class="co">#&gt;   Information saturated (h1) model          Structured</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Latent Variables:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;   textual =~                                                            </span>
<span class="co">#&gt;     x1                0.229    0.081    2.838    0.005    0.229    0.196</span>
<span class="co">#&gt;     x2                0.059    0.085    0.692    0.489    0.059    0.050</span>
<span class="co">#&gt;     x3               -0.082                              -0.082   -0.073</span>
<span class="co">#&gt;     x4                0.978    0.063   15.556    0.000    0.978    0.841</span>
<span class="co">#&gt;     x5                1.136    0.063   17.951    0.000    1.136    0.882</span>
<span class="co">#&gt;     x6                0.879    0.058   15.098    0.000    0.879    0.804</span>
<span class="co">#&gt;     x7                0.027    0.079    0.346    0.729    0.027    0.025</span>
<span class="co">#&gt;     x8               -0.049                              -0.049   -0.048</span>
<span class="co">#&gt;     x9                0.027    0.064    0.416    0.677    0.027    0.026</span>
<span class="co">#&gt;   speed =~                                                              </span>
<span class="co">#&gt;     x1                0.079    0.087    0.909    0.363    0.079    0.068</span>
<span class="co">#&gt;     x2               -0.108    0.093   -1.164    0.244   -0.108   -0.092</span>
<span class="co">#&gt;     x3                0.075                               0.075    0.066</span>
<span class="co">#&gt;     x4                0.012    0.062    0.192    0.848    0.012    0.010</span>
<span class="co">#&gt;     x5                0.003                               0.003    0.002</span>
<span class="co">#&gt;     x6               -0.008    0.060   -0.132    0.895   -0.008   -0.007</span>
<span class="co">#&gt;     x7                0.809    0.100    8.123    0.000    0.809    0.744</span>
<span class="co">#&gt;     x8                0.734    0.069   10.650    0.000    0.734    0.726</span>
<span class="co">#&gt;     x9                0.503    0.068    7.388    0.000    0.503    0.499</span>
<span class="co">#&gt;   visual =~                                                             </span>
<span class="co">#&gt;     x1                0.680    0.088    7.768    0.000    0.680    0.584</span>
<span class="co">#&gt;     x2                0.598    0.093    6.429    0.000    0.598    0.509</span>
<span class="co">#&gt;     x3                0.759    0.077    9.819    0.000    0.759    0.672</span>
<span class="co">#&gt;     x4                0.022    0.074    0.302    0.763    0.022    0.019</span>
<span class="co">#&gt;     x5               -0.064                              -0.064   -0.050</span>
<span class="co">#&gt;     x6                0.100    0.063    1.584    0.113    0.100    0.091</span>
<span class="co">#&gt;     x7               -0.247    0.101   -2.438    0.015   -0.247   -0.227</span>
<span class="co">#&gt;     x8                0.035                               0.035    0.035</span>
<span class="co">#&gt;     x9                0.316    0.072    4.360    0.000    0.316    0.314</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Covariances:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;  .x3 ~~                                                                 </span>
<span class="co">#&gt;    .x4                0.028    0.046    0.611    0.541    0.028    0.056</span>
<span class="co">#&gt;   textual ~~                                                            </span>
<span class="co">#&gt;     speed             0.260    0.087    2.980    0.003    0.260    0.260</span>
<span class="co">#&gt;     visual            0.297    0.092    3.214    0.001    0.297    0.297</span>
<span class="co">#&gt;   speed ~~                                                              </span>
<span class="co">#&gt;     visual            0.313    0.115    2.722    0.006    0.313    0.313</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Variances:</span>
<span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span>
<span class="co">#&gt;    .x1                0.701    0.086    8.112    0.000    0.701    0.516</span>
<span class="co">#&gt;    .x2                1.031    0.102   10.127    0.000    1.031    0.746</span>
<span class="co">#&gt;    .x3                0.691    0.097    7.105    0.000    0.691    0.542</span>
<span class="co">#&gt;    .x4                0.375    0.048    7.778    0.000    0.375    0.277</span>
<span class="co">#&gt;    .x5                0.407    0.061    6.634    0.000    0.407    0.245</span>
<span class="co">#&gt;    .x6                0.366    0.042    8.614    0.000    0.366    0.306</span>
<span class="co">#&gt;    .x7                0.585    0.107    5.474    0.000    0.585    0.494</span>
<span class="co">#&gt;    .x8                0.483    0.080    6.071    0.000    0.483    0.473</span>
<span class="co">#&gt;    .x9                0.550    0.060    9.126    0.000    0.550    0.542</span>
<span class="co">#&gt;     textual           1.000                               1.000    1.000</span>
<span class="co">#&gt;     speed             1.000                               1.000    1.000</span>
<span class="co">#&gt;     visual            1.000                               1.000    1.000</span></code></pre></div>
<p>Check lavaan’s <code>lavaanify()</code> documentation to learn about syntaxes for model extension (covariances, regressions and much more).</p>
</div>
<div class="section level2">
<h2 id="export-results">Export results<a class="anchor" aria-label="anchor" href="#export-results"></a>
</h2>
<p>Result information from the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> may be exported to a text file with the <code><a href="../reference/export_lavaan_results.html">export_lavaan_results()</a></code> function. It is possible to add a preamble to enrich the information in the output.</p>
<p>Since the function runs lavaan’s <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> before dumping the results, one can add extra results such as modification indices and r-squared measures by including the corresponding modifiers to the call (all possible modifiers are listed in the lavaan’s <code>lavaan-class</code> help).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_preamble</span> <span class="op">&lt;-</span> <span class="st">'
ESEM on the classic Holtzinger Swineford data.

Referents chosen after target rotate EFA with 
Principal Axis extraction.
'</span>

<span class="fu"><a href="../reference/export_lavaan_results.html">export_lavaan_results</a></span><span class="op">(</span><span class="va">extended_cfa_fit</span>, preamble <span class="op">=</span> <span class="va">my_preamble</span>, rsquare <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>This saves a “lavaan_summary.txt” file to my current working directory with the preamble in <code>my_preamble</code> at the top. I also added the <code>rsquare</code> modifier to ensure it shows on the results. If I wished to save the file somewhere else I would pass the full path as <code>path_name</code>, something like “C:/directory_one/another_directory/my_desired_file_name.txt.” Irrespective of operating system the path must be written with forward <code>/</code>, not backward, slashes. The path must end with a file name with a text extension.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-asparouhov_exploratory_2009" class="csl-entry">
Asparouhov, Tihomir, and Bengt Muthén. 2009. <span>“Exploratory <span>Structural</span> <span>Equation</span> <span>Modeling</span>.”</span> <em>Structural Equation Modeling: A Multidisciplinary Journal</em> 16 (3): 397–438. <a href="https://doi.org/10.1080/10705510903008204" class="external-link">https://doi.org/10.1080/10705510903008204</a>.
</div>
<div id="ref-marsh_exploratory_2014" class="csl-entry">
Marsh, Herbert W., Alexandre J. S. Morin, Philip D. Parker, and Gurvinder Kaur. 2014. <span>“Exploratory <span>Structural</span> <span>Equation</span> <span>Modeling</span>: <span>An</span> <span>Integration</span> of the <span>Best</span> <span>Features</span> of <span>Exploratory</span> and <span>Confirmatory</span> <span>Factor</span> <span>Analysis</span>.”</span> <em>Annu. Rev. Clin. Psychol.</em> 10 (1): 85–110. <a href="https://doi.org/10.1146/annurev-clinpsy-032813-153700" class="external-link">https://doi.org/10.1146/annurev-clinpsy-032813-153700</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mateus Silvestrin, Leon T. de Beer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
